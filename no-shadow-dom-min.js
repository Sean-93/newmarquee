const RTL_LANGUAGES=["ar","he","fa","ur","yi","ps","dv","ug","syr"];class Marquee{constructor(e){this.container=e,this.marqueeContent=e.querySelector("#new-marquee-content"),this.currentAnimation=null,this.resizeListener=null,this.languageChangeTimeout=null,this.ensureImagesLoaded(()=>{this.setDefaultDirection(),this.animateMarquee(),this.resizeListener=this.animateMarquee.bind(this),window.addEventListener("resize",this.resizeListener),"true"===this.container.dataset.pauseonhover&&this.addHoverListeners()}),this.observer=new MutationObserver(()=>{this.languageChangeTimeout&&clearTimeout(this.languageChangeTimeout),this.languageChangeTimeout=setTimeout(()=>this.setDefaultDirection(),100)}),this.observer.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"]})}ensureImagesLoaded(e){let t=this.container.querySelectorAll("img"),n=Array.from(t).map(e=>new Promise(t=>{e.complete&&0!==e.naturalHeight?t():e.addEventListener("load",t,{once:!0})}));Promise.all(n).then(e).catch(e=>{console.error("Error loading images:",e)})}setDefaultDirection(){let e=document.documentElement.lang,t=this.container.dataset.direction;!RTL_LANGUAGES.includes(e)||t&&["left","right","up","down"].includes(t)||(this.container.dataset.direction="right")}animateMarquee(){let e=this.marqueeContent.scrollWidth,t=this.marqueeContent.scrollHeight,n=this.container.offsetWidth,i=this.container.offsetHeight,r=parseInt(this.container.dataset.speed,10)||50,s=this.container.dataset.direction||"left",a,o;switch(s){case"right":a=e/r,o=[{transform:`translateX(-${e}px)`},{transform:`translateX(${n}px)`}];break;case"up":a=t/r,o=[{transform:`translateY(${i}px)`},{transform:`translateY(-${t}px)`}];break;case"down":a=t/r,o=[{transform:`translateY(-${t}px)`},{transform:`translateY(${i}px)`}];break;default:a=e/r,o=[{transform:`translateX(${n}px)`},{transform:`translateX(-${e}px)`}]}let u=this.marqueeContent.animate(o,{duration:1e3*a,iterations:1/0});this.currentAnimation=u}addHoverListeners(){this.pauseAnimation=()=>{this.currentAnimation&&this.currentAnimation.pause()},this.resumeAnimation=()=>{this.currentAnimation&&this.currentAnimation.play()},this.marqueeContent.addEventListener("mouseenter",this.pauseAnimation),this.marqueeContent.addEventListener("mouseleave",this.resumeAnimation)}removeHoverListeners(){this.marqueeContent.removeEventListener("mouseenter",this.pauseAnimation),this.marqueeContent.removeEventListener("mouseleave",this.resumeAnimation)}destroy(){this.resizeListener&&window.removeEventListener("resize",this.resizeListener),"true"===this.container.dataset.pauseonhover&&this.removeHoverListeners(),this.currentAnimation&&(this.currentAnimation.cancel(),this.currentAnimation=null),this.observer&&this.observer.disconnect()}}function initializeMarquees(){document.querySelectorAll(".new-marquee-container").forEach(e=>{new Marquee(e)})}document.addEventListener("DOMContentLoaded",initializeMarquees);