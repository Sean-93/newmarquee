const RTL_LANGUAGES=["ar","he","fa","ur","yi","ps","dv","ug","syr"];window.addEventListener("load",()=>{document.querySelectorAll(".newmarquee-container").forEach(t=>{let e=t.querySelector("#newmarquee-content");if(!e)return;let n=e=>{let n=t.querySelectorAll("img"),i=Array.from(n).map(t=>new Promise(e=>{t.complete&&0!==t.naturalHeight?e():t.addEventListener("load",e,{once:!0})}));Promise.all(i).then(e).catch(t=>console.error("ERROR LOADING IMAGES:",t))},i=()=>{let e=document.documentElement.lang,n=["left","right","up","down"],i=t.dataset.direction;!RTL_LANGUAGES.includes(e)||i&&n.includes(i)||(t.dataset.direction="right")},a=t=>{e.style.transition="opacity 0.5s ease",e.style.opacity="0",e.addEventListener("transitionend",()=>{e.style.opacity="1",e.style.transition="none",t()},{once:!0})},r=()=>{if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){e.style.visibility="visible";return}let n=e.scrollWidth,i=e.scrollHeight,a=t.offsetWidth,s=t.offsetHeight;if(0===n||0===a||0===i||0===s){console.warn("MARQUEE ANIMATION SKIPPED: INVALID DIMENSIONS."),t.__retriedAnimation||(t.__retriedAnimation=!0,setTimeout(()=>r(),100));return}t.__retriedAnimation=!1;let l=parseInt(t.dataset.speed,10)||50,o=t.dataset.direction||"left",d,c;switch(e.style.visibility="visible",o){case"right":e.style.transform=`translateX(-${n}px)`,d=n/l,c=[{transform:`translateX(-${n}px)`},{transform:`translateX(${a}px)`}];break;case"up":e.style.transform=`translateY(${s}px)`,d=i/l,c=[{transform:`translateY(${s}px)`},{transform:`translateY(-${i}px)`}];break;case"down":e.style.transform=`translateY(-${i}px)`,d=i/l,c=[{transform:`translateY(-${i}px)`},{transform:`translateY(${s}px)`}];break;default:e.style.transform=`translateX(${a}px)`,d=n/l,c=[{transform:`translateX(${a}px)`},{transform:`translateX(-${n}px)`}]}t.__currentAnimation&&t.__currentAnimation.cancel(),t.__currentAnimation=e.animate(c,{duration:1e3*d,iterations:1/0,easing:"linear"}),t.__currentAnimation.onfinish=()=>{t.__currentAnimation=null}},s=()=>{let e=0,n=0,i=0,s=()=>{let l=t.offsetWidth,o=t.offsetHeight;l===e&&o===n?i++:i=0,e=l,n=o,i>=3?requestAnimationFrame(()=>{requestAnimationFrame(()=>{t.__initialized||(t.__initialized=!0,a(()=>r()))})}):requestAnimationFrame(s)};requestAnimationFrame(s)},l=()=>{clearTimeout(t.__resizeTimeout),t.__resizeTimeout=setTimeout(()=>{let e=t.offsetWidth,n=t.offsetHeight;(e!==t.__lastW||n!==t.__lastH)&&(t.__lastW=e,t.__lastH=n,a(()=>r()))},200)},o=()=>{e.addEventListener("mouseover",()=>{!t.__isPaused&&(t.__isPaused=!0,t.__currentAnimation&&t.__currentAnimation.pause())}),e.addEventListener("mouseout",()=>{t.__isPaused&&(t.__isPaused=!1,t.__currentAnimation&&t.__currentAnimation.play())})};n(()=>{i(),"visible"!==document.visibilityState?document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&s()},{once:!0}):s(),window.addEventListener("resize",l),"true"===t.dataset.pauseonhover&&o();let e=new MutationObserver(()=>{clearTimeout(t.__langTimeout),t.__langTimeout=setTimeout(()=>i(),100)});e.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"]}),window.addEventListener("beforeunload",()=>{t.__currentAnimation&&t.__currentAnimation.cancel(),e&&e.disconnect()})})})});